"use strict";(self.webpackChunklfx_rushstack_io=self.webpackChunklfx_rushstack_io||[]).push([[590],{158:(e,t,n)=>{n.d(t,{Zo:()=>m,kt:()=>c});var a=n(6393);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=a.createContext({}),p=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},m=function(e){var t=p(e.components);return a.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,r=e.originalType,s=e.parentName,m=i(e,["components","mdxType","originalType","parentName"]),u=p(n),c=o,h=u["".concat(s,".").concat(c)]||u[c]||d[c]||r;return n?a.createElement(h,l(l({ref:t},m),{},{components:n})):a.createElement(h,l({ref:t},m))}));function c(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=n.length,l=new Array(r);l[0]=u;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i.mdxType="string"==typeof e?e:o,l[1]=i;for(var p=2;p<r;p++)l[p]=n[p];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},1266:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>w,contentTitle:()=>b,default:()=>x,frontMatter:()=>y,metadata:()=>v,toc:()=>C});var a=n(216),o=n(2228),r=n(6393),l=n(158),i=n(5881),s=n(6785),p=n(5882),m=n(2868),d=n(9580);const u="tabList_dxiR",c="tabItem_znke";function h(e){var t,n,o=e.lazy,l=e.block,s=e.defaultValue,h=e.values,k=e.groupId,f=e.className,g=r.Children.map(e.children,(function(e){if((0,r.isValidElement)(e)&&"value"in e.props)return e;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})),N=null!=h?h:g.map((function(e){var t=e.props;return{value:t.value,label:t.label,attributes:t.attributes}})),y=(0,p.l)(N,(function(e,t){return e.value===t.value}));if(y.length>0)throw new Error('Docusaurus error: Duplicate values "'+y.map((function(e){return e.value})).join(", ")+'" found in <Tabs>. Every value needs to be unique.');var b=null===s?s:null!=(t=null!=s?s:null==(n=g.find((function(e){return e.props.default})))?void 0:n.props.value)?t:g[0].props.value;if(null!==b&&!N.some((function(e){return e.value===b})))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+b+'" but none of its children has the corresponding value. Available values are: '+N.map((function(e){return e.value})).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");var v=(0,m.U)(),w=v.tabGroupChoices,C=v.setTabGroupChoices,j=(0,r.useState)(b),x=j[0],T=j[1],_=[],P=(0,d.o5)().blockElementScrollPositionUntilNextRender;if(null!=k){var O=w[k];null!=O&&O!==x&&N.some((function(e){return e.value===O}))&&T(O)}var I=function(e){var t=e.currentTarget,n=_.indexOf(t),a=N[n].value;a!==x&&(P(t),T(a),null!=k&&C(k,String(a)))},S=function(e){var t,n=null;switch(e.key){case"ArrowRight":var a,o=_.indexOf(e.currentTarget)+1;n=null!=(a=_[o])?a:_[0];break;case"ArrowLeft":var r,l=_.indexOf(e.currentTarget)-1;n=null!=(r=_[l])?r:_[_.length-1]}null==(t=n)||t.focus()};return r.createElement("div",{className:(0,i.Z)("tabs-container",u)},r.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,i.Z)("tabs",{"tabs--block":l},f)},N.map((function(e){var t=e.value,n=e.label,o=e.attributes;return r.createElement("li",(0,a.Z)({role:"tab",tabIndex:x===t?0:-1,"aria-selected":x===t,key:t,ref:function(e){return _.push(e)},onKeyDown:S,onFocus:I,onClick:I},o,{className:(0,i.Z)("tabs__item",c,null==o?void 0:o.className,{"tabs__item--active":x===t})}),null!=n?n:t)}))),o?(0,r.cloneElement)(g.filter((function(e){return e.props.value===x}))[0],{className:"margin-top--md"}):r.createElement("div",{className:"margin-top--md"},g.map((function(e,t){return(0,r.cloneElement)(e,{key:t,hidden:e.props.value!==x})}))))}function k(e){var t=(0,s.Z)();return r.createElement(h,(0,a.Z)({key:String(t)},e))}const f="tabItem_o_Vg";function g(e){var t=e.children,n=e.hidden,a=e.className;return r.createElement("div",{role:"tabpanel",className:(0,i.Z)(f,a),hidden:n},t)}var N=["components"],y={title:"Tracing package resolution"},b=void 0,v={unversionedId:"pages/concepts/tracing_resolution",id:"pages/concepts/tracing_resolution",title:"Tracing package resolution",description:"",source:"@site/docs/pages/concepts/tracing_resolution.md",sourceDirName:"pages/concepts",slug:"/pages/concepts/tracing_resolution",permalink:"/pages/concepts/tracing_resolution",draft:!1,editUrl:"https://github.com/microsoft/rushstack-websites/tree/main/websites/lfx.rushstack.io/docs/pages/concepts/tracing_resolution.md",tags:[],version:"current",frontMatter:{title:"Tracing package resolution"},sidebar:"docsSidebar",previous:{title:"Installation models",permalink:"/pages/concepts/install_models"},next:{title:"Strict settings",permalink:"/pages/concepts/strict_settings"}},w={},C=[{value:"CommonJS module resolution",id:"commonjs-module-resolution",level:2},{value:"\ud83d\udd0d Tracing CommonJS resolution",id:"-tracing-commonjs-resolution",level:3},{value:"ES module resolution",id:"es-module-resolution",level:2},{value:"TypeScript module resolution",id:"typescript-module-resolution",level:2},{value:"\ud83d\udd0d Tracing TypeScript resolution",id:"-tracing-typescript-resolution",level:3},{value:"See also",id:"see-also",level:2}],j={toc:C};function x(e){var t=e.components,n=(0,o.Z)(e,N);return(0,l.kt)("wrapper",(0,a.Z)({},j,n,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("h2",{id:"commonjs-module-resolution"},"CommonJS module resolution"),(0,l.kt)("p",null,"If you are using the NPM or PNPM ",(0,l.kt)("a",{parentName:"p",href:"/pages/concepts/install_models"},"installation model")," (versus PnP),\nthe CommonJS ",(0,l.kt)("inlineCode",{parentName:"p"},"require()")," API performs module resolution by traversing physical folders on disk.\nThis helps with troubleshooting, because many problems can be understood simply by inspecting folders\nusing your shell.  The complete algorithm is detailed in\n",(0,l.kt)("a",{parentName:"p",href:"https://nodejs.org/api/modules.html#all-together"},"the Node.js specification"),", but approximately it works\nlike this (ignoring many details such as import path mappings):"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"If your import path starts with ",(0,l.kt)("inlineCode",{parentName:"p"},".")," or ",(0,l.kt)("inlineCode",{parentName:"p"},"..")," or ",(0,l.kt)("inlineCode",{parentName:"p"},"/")," (for example ",(0,l.kt)("inlineCode",{parentName:"p"},"require('./path/to/file')"),"),\nthen the entire string will be interpreted as a file path.")),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"Otherwise, the first part will be interpreted as an NPM package name.  For example\n",(0,l.kt)("inlineCode",{parentName:"p"},"require('one/two/three')")," would look for an NPM package called ",(0,l.kt)("inlineCode",{parentName:"p"},"one"),",\nand ",(0,l.kt)("inlineCode",{parentName:"p"},"require('@company/one/two/three')")," would look for an NPM package ",(0,l.kt)("inlineCode",{parentName:"p"},"@company/one"),".")),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"If the API call ",(0,l.kt)("inlineCode",{parentName:"p"},"require('@company/one/two/three')")," is performed by a script ",(0,l.kt)("inlineCode",{parentName:"p"},"/a/b/c/d/e.js"),", then\nthe module resolver will look for the ",(0,l.kt)("inlineCode",{parentName:"p"},"@company/one")," install folder by searching in ",(0,l.kt)("inlineCode",{parentName:"p"},"node_modules")," folders\nin parent folders.  In our example, these paths would be checked (approximately, ignoring many details):"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"/a/b/c/d/node_modules/@company/one/package.json")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"/a/b/c/node_modules/@company/one/package.json")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"/a/b/node_modules/@company/one/package.json")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"/a/node_modules/@company/one/package.json")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"/node_modules/@company/one/package.json"))),(0,l.kt)("p",{parentName:"li"},"The first match is used, ignoring other possible matches.  If no match is found, then ",(0,l.kt)("inlineCode",{parentName:"p"},"require()")," fails\nby throwing an exception.")),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"Once a match is found, the ",(0,l.kt)("inlineCode",{parentName:"p"},"two/three")," remaining path is evaluated relative to the ",(0,l.kt)("inlineCode",{parentName:"p"},"@company/one")," install folder.\nLet's suppose that ",(0,l.kt)("inlineCode",{parentName:"p"},"/a/b/node_modules/@company/one/package.json")," was the found match; then (if there are no\nimport path mappings) the resolved script will be ",(0,l.kt)("inlineCode",{parentName:"p"},"/a/b/node_modules/@company/one/two/three.js"),".")),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"If the remaining path is an empty string (for example ",(0,l.kt)("inlineCode",{parentName:"p"},"require('@company/one')"),"), then a default path will be used.\nThe default path would be ",(0,l.kt)("inlineCode",{parentName:"p"},"/a/b/node_modules/@company/one/index.js"),", but most likely an explicit path will be\nspecified by a ",(0,l.kt)("strong",{parentName:"p"},"package.json")," field such as ",(0,l.kt)("inlineCode",{parentName:"p"},'"main"'),".  For example, with ",(0,l.kt)("inlineCode",{parentName:"p"},'"main": "dist/one.js"'),",\nthe final path instead would be ",(0,l.kt)("inlineCode",{parentName:"p"},"/a/b/node_modules/@company/one/dist/one.js"),"."))),(0,l.kt)("p",null,"A couple important things to understand about this algorithm:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("strong",{parentName:"p"},"Phantom dependencies are possible:"),"\nThe ",(0,l.kt)("inlineCode",{parentName:"p"},"node_modules")," folder was probably created by ",(0,l.kt)("inlineCode",{parentName:"p"},"pnpm install")," based on some ",(0,l.kt)("strong",{parentName:"p"},"package.json")," file,\nmost likely the package that owns our script ",(0,l.kt)("inlineCode",{parentName:"p"},"/a/b/c/d/e.js"),".  However, at no point does the algorithm\nread THAT ",(0,l.kt)("strong",{parentName:"p"},"package.json")," file.  Resolution only considers ",(0,l.kt)("inlineCode",{parentName:"p"},"node_modules")," folders, regardless of how they\nwere created.  This is the fundamental design flaw that makes\n",(0,l.kt)("a",{parentName:"p",href:"https://rushjs.io/pages/advanced/phantom_deps/"},"phantom dependencies"),' possible, as well as "hoisting" which is the\nquestionable practice of intentionally introducing phantom dependencies.')),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("strong",{parentName:"p"},"Symlinks get normalized:"),"  When a module is imported via a symlink, the script path is normalized\nby calling ",(0,l.kt)("a",{parentName:"p",href:"https://nodejs.org/api/fs.html#fspromisesrealpathpath-options"},"fs.realpath()"),"\nto eliminate any symlinks, so that Step 3 will visit parent folders from the physical path\ninstead of the logical (with symlinks) path."),(0,l.kt)("p",{parentName:"li"},"For example: suppose that ",(0,l.kt)("inlineCode",{parentName:"p"},"/my-repo/my-app/node_modules/my-library")," is actually a symlink to\n",(0,l.kt)("inlineCode",{parentName:"p"},"/my-repo/my-library"),", and the executing script was imported as ",(0,l.kt)("inlineCode",{parentName:"p"},"./node_modules/my-library/dist/bundle.js"),".\nWhen ",(0,l.kt)("inlineCode",{parentName:"p"},"bundle.js")," calls ",(0,l.kt)("inlineCode",{parentName:"p"},"require('some-other-library')"),", the searched parent folder will be\n",(0,l.kt)("inlineCode",{parentName:"p"},"/my-repo/my-library/node_modules/"),", NOT ",(0,l.kt)("inlineCode",{parentName:"p"},"/my-repo/my-app/node_modules"),".  This feature is what makes\nthe PNPM installation model possible."),(0,l.kt)("p",{parentName:"li"},"(This was not true in ancient versions of Node.js; see the\n",(0,l.kt)("a",{parentName:"p",href:"https://nodejs.org/api/all.html#cli_preserve_symlinks"},"--preserve-symlinks")," docs for details.)"))),(0,l.kt)("h3",{id:"-tracing-commonjs-resolution"},"\ud83d\udd0d Tracing CommonJS resolution"),(0,l.kt)("p",null,"Let's try a hands-on experiment, to see how CommonJS resolution can be traced by inspecting folders on disk."),(0,l.kt)("p",null,"1",". Clone and install the ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/microsoft/lockfile-explorer-demos/tree/demo/sample-1"},"demo/sample-1"),"\nbranch from the ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/microsoft/lockfile-explorer-demos/"},"lockfile-explorer-demos"),"\ndemo repo. ",(0,l.kt)("strong",{parentName:"p"},(0,l.kt)("em",{parentName:"strong"},"You will need to launch the Verdaccio service in a separate shell window.")),"  See the\n",(0,l.kt)("a",{parentName:"p",href:"/pages/scenarios/demos_repo"},"Demos repository")," topic for instructions."),(0,l.kt)("p",null,"Recall that the ",(0,l.kt)("inlineCode",{parentName:"p"},"demo/sample-1")," lockfile looks like this:"),(0,l.kt)("img",{src:"/images/docs/lfx-demo-sample-1.svg",alt:"dependency graph: demo/sample-1"}),(0,l.kt)("p",null,"After running ",(0,l.kt)("inlineCode",{parentName:"p"},"rush install")," in the ",(0,l.kt)("inlineCode",{parentName:"p"},"~/lockfile-explorer-demos/")," folder, the project B should\nhave the following files:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"~/lockfile-explorer-demos/projects/b/package.json"),": defines the package"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"~/lockfile-explorer-demos/projects/b/index.js"),": some placeholder source code"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"~/lockfile-explorer-demos/projects/b/node_modules/@rushstack/d/"),": installed folder for dependency D"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"~/lockfile-explorer-demos/projects/b/node_modules/@rushstack/n/"),": installed folder for dependency N")),(0,l.kt)("p",null,"Observe that PNPM has created symlinks in the ",(0,l.kt)("inlineCode",{parentName:"p"},"b/node_modules")," folder. We can inspect them using the shell:"),(0,l.kt)(k,{mdxType:"Tabs"},(0,l.kt)(g,{value:"bash",label:"Bash",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"ls -l ~/lockfile-explorer-demos/projects/b/node_modules/\n")),(0,l.kt)("p",null,"  Output:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"lrwxrwxrwx 1 d -> /home/yourself/lockfile-explorer-demos/projects/d/\nlrwxrwxrwx 1 n -> /home/yourself/lockfile-explorer-demos/common/temp/node_modules/.pnpm/@rushstack+n@2.0.0/node_modules/@rushstack/n/\n"))),(0,l.kt)(g,{value:"windows",label:"PowerShell",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-powershell"},"dir projects\\b\\node_modules\\@rushstack\\ | select Name,LinkType,Target\n")),(0,l.kt)("p",null,"  Output:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"Name LinkType Target\n---- -------- ------\nd    Junction {C:\\Git\\lockfile-explorer-demos\\projects\\d\\}\nn    Junction {C:\\Git\\lockfile-explorer-demos\\common\\temp\\node_modules\\.pnpm\\@rushstack+n@2.0.0\\node_modules\\@rushstack\\n\\}\n"))),(0,l.kt)(g,{value:"cmd",label:"DOS",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-batch"},"dir node_modules\\@rushstack\\\n")),(0,l.kt)("p",null,"  Output:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"Directory of C:\\Git\\lockfile-explorer-demos\\projects\\b\\node_modules\\@rushstack\n\n12/01/2022  03:11 PM    <DIR>          .\n12/01/2022  03:11 PM    <DIR>          ..\n12/01/2022  03:11 PM    <JUNCTION>     d [C:\\Git\\lockfile-explorer-demos\\projects\\d]\n12/01/2022  03:11 PM    <JUNCTION>     n [C:\\Git\\lockfile-explorer-demos\\common\\temp\\node_modules\\.pnpm\\@rushstack+n@2.0.0\\node_modules\\@rushstack\\n]\n")))),(0,l.kt)("p",null,"Observe that:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"node_modules/@rushstack/d")," gets symlinked to ",(0,l.kt)("inlineCode",{parentName:"li"},"projects/d")," because ",(0,l.kt)("inlineCode",{parentName:"li"},"b/package.json")," declared\nit as a local workspace dependency (",(0,l.kt)("inlineCode",{parentName:"li"},'"@rushstack/d": "workspace:*"'),")"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"node_modules/@rushstack/d")," gets symlinked to a folder under ",(0,l.kt)("inlineCode",{parentName:"li"},"common/temp")," because\n",(0,l.kt)("inlineCode",{parentName:"li"},"b/package.json")," declared it as an external dependency, installed from the NPM registry\n(",(0,l.kt)("inlineCode",{parentName:"li"},'"@rushstack/n": "^2.0.0"'),")")),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"Note: Rush silently forces ",(0,l.kt)("a",{parentName:"p",href:"https://pnpm.io/npmrc#link-workspace-packages"},"--link-workspace-packages=false"),"\nwhich ensures that the ",(0,l.kt)("inlineCode",{parentName:"p"},"workspace:")," prefix unambiguously determines whether a dependency will be linked\nlocally versus externally. If you are using PNPM without Rush, it's instead decided by an implicit heuristic.")),(0,l.kt)("p",null,"We can confirm this by calling the\n",(0,l.kt)("a",{parentName:"p",href:"https://nodejs.org/api/modules.html#requireresolverequest-options"},"Node.js require.resolve()"),"\nAPI:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"# From the folder of project B...\ncd ~/lockfile-explorer-demos/projects/b/\n\n# ...call the require.resolve() API to print out the target path for D:\nnode -e console.log(require.resolve('@rushstack/d'))\n\n# Expected output:\n# /home/yourself/lockfile-explorer-demos/projects/d/index.js\n")),(0,l.kt)("p",null,"Now let's follow the chain a step further.  At runtime, suppose that A imports a file from D,\nand then D in turn tries to import N.  Will it work?  We might try this experiment:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"# INCORRECT METHOD\n\n# From the folder of project B/D...\ncd ~/lockfile-explorer-demos/projects/b/node_modules/@rushstack/d\n\n# ...call the require.resolve() API to print out the target path for N:\nnode -e console.log(require.resolve('@rushstack/n'))\n\n# Expected output:\n# /home/yourself/lockfile-explorer-demos/common/temp/node_modules/.pnpm/@rushstack+n@2.0.0/node_modules/@rushstack/n/index.js\n")),(0,l.kt)("p",null,"According to the diagram, this should NOT work, because D"),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"Warning: If you're creating a tool that needs to resolve imports, do not write your own code that\ntraverses ",(0,l.kt)("inlineCode",{parentName:"p"},"node_modules")," folders.  The presentation here is greatly simplified for learning purposes;\nthe full algorithm is complex and difficult to implement correctly.  Instead, use a standard API such as\n",(0,l.kt)("a",{parentName:"p",href:"https://nodejs.org/api/modules.html#requireresolverequest-options"},"require.resolve()"),",\n",(0,l.kt)("a",{parentName:"p",href:"https://api.rushstack.io/pages/node-core-library.import/"},"node-core-library Import"),",\nor the ",(0,l.kt)("a",{parentName:"p",href:"https://www.npmjs.com/package/resolve"},"resolve")," NPM package.")),(0,l.kt)("h2",{id:"es-module-resolution"},"ES module resolution"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},'"module"')," used by runtimes supporting ESNext modules, for example the Webpack bundler.\nFor example: ",(0,l.kt)("inlineCode",{parentName:"li"},'"module": "dist/one.esm.js"'))),(0,l.kt)("h2",{id:"typescript-module-resolution"},"TypeScript module resolution"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},'"typings"')," or ",(0,l.kt)("inlineCode",{parentName:"li"},'"types"')," used only by the TypeScript compiler.  (If it's missing, the compiler will\nlook in the same folder as the runtime ",(0,l.kt)("inlineCode",{parentName:"li"},".js")," file.)\nFor example: ",(0,l.kt)("inlineCode",{parentName:"li"},'"typings": "dist/one.d.ts"'))),(0,l.kt)("h3",{id:"-tracing-typescript-resolution"},"\ud83d\udd0d Tracing TypeScript resolution"),(0,l.kt)("h2",{id:"see-also"},"See also"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://www.npmjs.com/package/@rushstack/trace-import"},"@","rushstack/trace-import"),": Our command-line tool for troubleshooting how modules are resolved by ",(0,l.kt)("inlineCode",{parentName:"li"},"import")," and ",(0,l.kt)("inlineCode",{parentName:"li"},"require()")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://nodejs.org/api/modules.html#all-together"},"Node.js require()")," specification and algorithm"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://nodejs.org/api/modules.html#requireresolverequest-options"},"Node.js require.resolve()")," API docs"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://api.rushstack.io/pages/node-core-library.import/"},"node-core-library Import"),": the Rush Stack API\nwhich provides similar functionality as ",(0,l.kt)("inlineCode",{parentName:"li"},"require.resolve()")," but with improved TypeScript typings and some\nadditional features"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://www.npmjs.com/package/resolve"},"resolve"),": a standalone NPM package that implements\n",(0,l.kt)("inlineCode",{parentName:"li"},"require.resolve()")," algorithm with the ability to specify a base folder (it is used internally\nby ",(0,l.kt)("inlineCode",{parentName:"li"},"Import"),")"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://docs.npmjs.com/cli/v6/configuring-npm/package-json"},"package.json fields")," docs from NPM")))}x.isMDXComponent=!0}}]);